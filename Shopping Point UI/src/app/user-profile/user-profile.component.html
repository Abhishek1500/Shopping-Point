
<div class="container" style="padding: 10px;">
<div class="card p-5" style="margin: auto; width: 45%; background-color: rgb(250,250,250);">
    <div style="margin: auto;">
        <form #loginForm="ngForm" style="width: 90%; text-align: center;">

            <img src={{newUser.image}} width="30%" style="border-radius: 100px;" alt="" class="mb-1">
            
            <div class="mb-1"><strong><i>{{newUser.email}}</i></strong></div>
            <div class="mb-4"><strong><i>{{newUser.profile}}</i></strong></div>
            <div  class="form-row">
                
                <div class="form-group mb-3" style="margin: auto;">
                    <label for="userNameInput">Name</label>
                    <input type="text" style="text-align: center;" #userNameInput="ngModel" [(ngModel)]="newUser.name" class="form-control" name="userNameInput"
                        required pattern="^[a-zA-Z][a-zA-Z\s]+$" minlength="3" maxlength="30" placeholder="Name">
                    <div id="userEmailHelp" *ngIf="userNameInput.invalid&&userNameInput.touched">
                        <small class="form-text text-danger" *ngIf="userNameInput.hasError('required')">Name is required</small>
                        <small class="form-text text-danger" *ngIf="userNameInput.hasError('minlength')">should contain alteast 2
                            letter</small>
                        <small class="form-text text-danger" *ngIf="userNameInput.hasError('pattern')">Name pattern is Invalid</small>
                    </div>
                </div>
            </div>
            
            
            <div class="form-row mb-3">
                <div class="form-group col-md-6">
                    <label for="DOM">DOB</label>
                    <input style="text-align: center;" type="date" class="form-control" [(ngModel)]="newUser.dob" name="DOM" placeholder="Date Of Manufacture"
                      [max]="mindate"  required #DOM="ngModel">
                    <div id="DOMhelp" *ngIf="DOM.invalid&&DOM.touched">
                        <small class="form-text text-danger" *ngIf="DOM.hasError('required')">Date Of Birth is
                            required</small>
                    </div>
                </div>
                
                <div class="form-group col-md-6">
                    <label for="category">Gender</label>
                    <select style="text-align: center;" class="custom-select" [(ngModel)]="newUser.gender" name="category" required #Gender="ngModel">
                        <!-- ned to be process -->
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="others">others</option>
                
                    </select>
                    <small id="categoryHelp" *ngIf="Gender.invalid&&Gender.touched" class="form-text text-danger">Select One</small>
                </div>
            </div>

            <div class="form-group mb-3" style="margin: auto;">
                <label for="description">Photo</label>
                <div style="width: 80%;margin: auto;">
                    <input type="file" class="btn btn-primary" style="width: 100%;" [(ngModel)]="temp" (change)="onFileSelected($event)"
                        name="fileInput" #fileInput="ngModel">
                </div>
            </div>

            <div style="display: flex; justify-content: space-between;" class="mb-3">
            <button class="btn btn-primary" (click)="save()" [disabled]="loginForm.invalid||!changeHappen()">Save</button>
            <button class="btn btn-danger" (click)="changepassword(passwordInput,newpasswordInput)" [disabled]="passwordInput.invalid||newpasswordInput.invalid||password.currentpass==password.newpass" >Change Password</button>
            </div>
            </form>
            <form>
            <div class="form-row">
            <div class="form-group col-md-6">
                <label for="passwordInput" style="text-align: center; display: block;" >Current Password</label>
                <input style="text-align: center;" type="password" #passwordInput="ngModel" [(ngModel)]="password.currentpass" class="form-control" name="passwordInput"
                    placeholder="Password" required pattern="^[a-zA-Z]+[\.]*[^\s]+$" minlength="8" maxlength="20">
                <div id="passwordHelp" *ngIf="passwordInput.invalid&&passwordInput.touched">
                    <small class="form-text text-danger" *ngIf="passwordInput.hasError('required')">Current Password is required</small>
                    <small class="form-text text-danger" *ngIf="passwordInput.hasError('minlength')">Password min length = 8</small>
                    <small class="form-text text-danger" *ngIf="passwordInput.hasError('pattern')">password pattern is Invalid</small>
                </div>
            </div>
            <div class="form-group col-md-6">
                <label for="passwordInput" style="text-align: center; display: block;">new Password</label>
                <input type="password" #newpasswordInput="ngModel" [(ngModel)]="password.newpass" class="form-control"
                    name="newpasswordInput" style="text-align: center;" placeholder="new Password" required pattern="^[a-zA-Z]+[\.]*[^\s]+$" minlength="8"
                    maxlength="20">
                <div id="passwordHelp" *ngIf="newpasswordInput.invalid&&newpasswordInput.touched">
                    <small class="form-text text-danger" *ngIf="newpasswordInput.hasError('required')">New Password is required</small>
                    <small class="form-text text-danger" *ngIf="newpasswordInput.hasError('minlength')">Password min lmegth = 8</small>
                    <small class="form-text text-danger" *ngIf="newpasswordInput.hasError('pattern')">password pattern is Invalid</small>
                </div>
            </div>
            <small class="form-text text-danger" *ngIf="newpasswordInput.valid&&newpasswordInput.touched&&password.currentpass==password.newpass">new password cant be equal to
                current password</small>
            </div>
            </form>
        </div>
        
    </div>
</div>
<div *ngIf="loading" style="position: absolute;left: 50%;top: 50%;">
    <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>